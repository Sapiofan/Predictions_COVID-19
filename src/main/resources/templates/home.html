<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Statistics</title>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-base.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-ui.min.js"></script>
    <script src="https://cdn.anychart.com/releases/v8/js/anychart-exports.min.js"></script>
    <link href="https://cdn.anychart.com/releases/v8/css/anychart-ui.min.css" type="text/css" rel="stylesheet">
    <link href="https://cdn.anychart.com/releases/v8/fonts/css/anychart-font.min.css" type="text/css" rel="stylesheet">

<!--    <script src="d3.min.js?v=3.2.8"></script>-->
    <style type="text/css">
        table {
            border-collapse: collapse;
            border: 2px black solid;
            font: 12px sans-serif;
        }

        td {
            border: 1px black solid;
            padding: 5px;
        }
        .container-area {
            width: 700px;
            height: 500px;
        }
        html,
        body,
        #column-chart,
        #line-chart {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
        }

    </style>
</head>
<body>
    <div class="container-area">
        <div id="column-chart"></div>
        <div id="textSection"></div>
    </div>
    <div class="container-area">
        <div id="line-chart"></div>
    </div>
    <script th:inline="javascript">
        anychart.onDocumentReady(function () {
            // create data set on our data
            var dataSet = anychart.data.set(getData());

            // map data for the first series, take x from the zero column and value from the first column of data set
            var firstSeriesData = dataSet.mapAs({ x: 0, value: 1 });

            // create line chart
            var chart = anychart.line();

            // turn on chart animation
            chart.animation(true);

            // set chart padding
            chart.padding([10, 20, 5, 20]);

            // turn on the crosshair
            // chart.crosshair().enabled(true).yLabel(false).yStroke(null);

            // set tooltip mode to point
            chart.tooltip().positionMode('point');

            // set chart title text settings
            chart.title(
                'Covid-19 new cases for last 4 months'
            );

            // set yAxis title
            chart.yAxis().title('New cases of Covid-19');
            chart.xAxis().labels().padding(5);

            // create first series with mapped data
            var firstSeries = chart.line(firstSeriesData);
            // firstSeries.name('Brandy');
            firstSeries.color("black");
            firstSeries.hovered().markers().enabled(true).type('circle').size(4);
            firstSeries
                .tooltip()
                .position('right')
                .anchor('left-center')
                .offsetX(5)
                .offsetY(5);

            // turn the legend on
            chart.legend().enabled(true).fontSize(13).padding([0, 0, 10, 0]);

            // set container id for the chart
            chart.container('line-chart');
            // initiate chart drawing
            chart.draw();

            var trial = document.getElementsByClassName("anychart-credits")
            for (let i = 0; i < trial.length; i++) {
                trial[i].remove();
            }
        });

        /*<![CDATA[*/

        var prediction = /*[[${prediction}]]*/ 'default';
        // console.log(prediction);

        var initial = /*[[${initial}]]*/ 'default';
        // console.log(initial);

        /*]]>*/

        getData();
        function getData() {
            var array = [];
            var counter = 0;
            for (const [key, value] of Object.entries(initial)) {
                var date = [];
                date[0] = key;
                // console.log(`${key}`);
                for (const [key1, value1] of Object.entries(value)) {
                    if(key1 == "World") {
                        date[1] = value1;
                        break;
                    }
                    // console.log(`${key1}: ${value1}`);
                }
                array[counter] = date;
                counter += 1;
            }

            // console.log(array);
            // for (const [key, value] of Object.entries(prediction)) {
            //     // var date = new Array(Object.keys(value).length);
            //     var date = [];
            //     date[0] = key.substring(0, key.length - 4);
            //     // console.log(`${key}`);
            //     for (const [key1, value1] of Object.entries(value)) {
            //         if(key1 == "World") {
            //             date[1] = value1;
            //             break;
            //         }
            //         // console.log(`${key1}: ${value1}`);
            //     }
            //     array[counter] = date;
            //     counter += 1;
            // }

            // for (let i = 0; i < array.length; i++) {
            //     console.log(array[i]);
            // }

            return array;
            // return [
            //     ['1986', 3.6, 2.3, 2.8, 11.5],
            //     ['1987', 7.1, 4.0, 4.1, 14.1],
            //     ['1988', 8.5, 6.2, 5.1, 17.5],
            //     ['1989', 9.2, 11.8, 6.5, 18.9],
            //     ['1990', 10.1, 13.0, 12.5, 20.8],
            //     ['1991', 11.6, 13.9, 18.0, 22.9],
            //     ['1992', 16.4, 18.0, 21.0, 25.2],
            //     ['1993', 18.0, 23.3, 20.3, 27.0],
            //     ['1994', 13.2, 24.7, 19.2, 26.5],
            //     ['1995', 12.0, 18.0, 14.4, 25.3],
            //     ['1996', 3.2, 15.1, 9.2, 23.4],
            //     ['1997', 4.1, 11.3, 5.9, 19.5],
            //     ['1998', 6.3, 14.2, 5.2, 17.8],
            //     ['1999', 9.4, 13.7, 4.7, 16.2],
            //     ['2000', 11.5, 9.9, 4.2, 15.4],
            //     ['2001', 13.5, 12.1, 1.2, 14.0],
            //     ['2002', 14.8, 13.5, 5.4, 12.5],
            //     ['2003', 16.6, 15.1, 6.3, 10.8],
            //     ['2004', 18.1, 17.9, 8.9, 8.9],
            //     ['2005', 17.0, 18.9, 10.1, 8.0],
            //     ['2006', 16.6, 20.3, 11.5, 6.2],
            //     ['2007', 14.1, 20.7, 12.2, 5.1],
            //     ['2008', 15.7, 21.6, 10, 3.7],
            //     ['2009', 12.0, 22.5, 8.9, 1.5]
            // ];
        }

        // function getData() {
        //     var array = [];
        //     // var array = new Array(Object.keys(prediction).length + Object.keys(initial).length);
        //     // var array = new Array(30);
        //     var counter = 0;
        //     for (const [key, value] of Object.entries(initial)) {
        //         // var date = new Array(Object.keys(value).length);
        //         var date = [];
        //         date[0] = key.substring(0, key.length - 4);
        //         // console.log(`${key}`);
        //         for (const [key1, value1] of Object.entries(value)) {
        //             if(key1 == "World") {
        //                 date[1] = value1;
        //                 break;
        //             }
        //             // console.log(`${key1}: ${value1}`);
        //         }
        //         array[counter] = date;
        //         counter += 1;
        //     }
        //
        //     // console.log(array);
        //     for (const [key, value] of Object.entries(prediction)) {
        //         // var date = new Array(Object.keys(value).length);
        //         var date = [];
        //         date[0] = key.substring(0, key.length - 4);
        //         // console.log(`${key}`);
        //         for (const [key1, value1] of Object.entries(value)) {
        //             if(key1 == "World") {
        //                 date[1] = value1;
        //                 break;
        //             }
        //             // console.log(`${key1}: ${value1}`);
        //         }
        //         array[counter] = date;
        //         counter += 1;
        //     }
        //
        //     // for (let i = 0; i < array.length; i++) {
        //     //     console.log(array[i]);
        //     // }
        //
        //     return array;
        //     // return [
        //     //     ['1986', 3.6, 2.3, 2.8, 11.5],
        //     //     ['1987', 7.1, 4.0, 4.1, 14.1],
        //     //     ['1988', 8.5, 6.2, 5.1, 17.5],
        //     //     ['1989', 9.2, 11.8, 6.5, 18.9],
        //     //     ['1990', 10.1, 13.0, 12.5, 20.8],
        //     //     ['1991', 11.6, 13.9, 18.0, 22.9],
        //     //     ['1992', 16.4, 18.0, 21.0, 25.2],
        //     //     ['1993', 18.0, 23.3, 20.3, 27.0],
        //     //     ['1994', 13.2, 24.7, 19.2, 26.5],
        //     //     ['1995', 12.0, 18.0, 14.4, 25.3],
        //     //     ['1996', 3.2, 15.1, 9.2, 23.4],
        //     //     ['1997', 4.1, 11.3, 5.9, 19.5],
        //     //     ['1998', 6.3, 14.2, 5.2, 17.8],
        //     //     ['1999', 9.4, 13.7, 4.7, 16.2],
        //     //     ['2000', 11.5, 9.9, 4.2, 15.4],
        //     //     ['2001', 13.5, 12.1, 1.2, 14.0],
        //     //     ['2002', 14.8, 13.5, 5.4, 12.5],
        //     //     ['2003', 16.6, 15.1, 6.3, 10.8],
        //     //     ['2004', 18.1, 17.9, 8.9, 8.9],
        //     //     ['2005', 17.0, 18.9, 10.1, 8.0],
        //     //     ['2006', 16.6, 20.3, 11.5, 6.2],
        //     //     ['2007', 14.1, 20.7, 12.2, 5.1],
        //     //     ['2008', 15.7, 21.6, 10, 3.7],
        //     //     ['2009', 12.0, 22.5, 8.9, 1.5]
        //     // ];
        // }

        anychart.onDocumentReady(function () {
            // create column chart
            var chart = anychart.column();

            // turn on chart animation
            chart.animation(true);

            // set chart title text settings
            chart.title('Covid-19 new cases for last 4 months');

            // create area series with passed data
            // var series = chart.column([
            //     ['Rouge', '80540'],
            //     ['Foundation', '94190'],
            //     ['Mascara', '102610'],
            //     ['Lip gloss', '110430'],
            //     ['Lipstick', '128000'],
            //     ['Nail polish', '143760'],
            //     ['Eyebrow pencil', '170670'],
            //     ['Eyeliner', '213210'],
            //     ['Eyeshadows', '249980']
            // ]);

            // console.log([
            //     ['Rouge', '80540'],
            //     ['Foundation', '94190'],
            //     ['Mascara', '102610'],
            //     ['Lip gloss', '110430'],
            //     ['Lipstick', '128000'],
            //     ['Nail polish', '143760'],
            //     ['Eyebrow pencil', '170670'],
            //     ['Eyeliner', '213210'],
            //     ['Eyeshadows', '249980']
            // ]);

            // console.log(getData());

            var series = chart.column(getData());

            // set series tooltip settings
            series.tooltip().titleFormat('{%X}');

            series
                .tooltip()
                .position('center-top')
                .anchor('center-bottom')
                .offsetX(0)
                .offsetY(5)
                .format('{%Value}{groupsSeparator: } cases');

            // set scale minimum
            chart.yScale().minimum(0);

            // set yAxis labels formatter
            chart.yAxis().labels().format('{%Value}{groupsSeparator: }');

            // tooltips position and interactivity settings
            chart.tooltip().positionMode('point');
            chart.interactivity().hoverMode('by-x');

            // axes titles
            chart.xAxis().title('Date');
            chart.yAxis().title('New cases of Covid-19');

            // set container id for the chart
            chart.container('column-chart');

            // initiate chart drawing
            chart.draw();

            var trial = document.getElementsByClassName("anychart-credits")
            for (let i = 0; i < trial.length; i++) {
                trial[i].remove();
            }
        });
    </script>
</body>
</html>